{"ast":null,"code":"import _toConsumableArray from\"/Users/hardikkhare/zotdrive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/hardikkhare/zotdrive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Button,Modal,Form}from\"react-bootstrap\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faFolderPlus}from\"@fortawesome/free-solid-svg-icons\";import{database}from\"../../firebase\";import{useAuth}from\"../../contexts/AuthContext\";import{ROOT_FOLDER}from\"../../hooks/useFolder\";export default function AddFolderButton(_ref){var currentFolder=_ref.currentFolder;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useAuth=useAuth(),currentUser=_useAuth.currentUser;function openModal(){setOpen(true);}function closeModal(){setOpen(false);}function handleSubmit(e){e.preventDefault();if(currentFolder==null)return;var path=_toConsumableArray(currentFolder.path);if(currentFolder!==ROOT_FOLDER){path.push({name:currentFolder.name,id:currentFolder.id});}database.folders.add({name:name,parentId:currentFolder.id,userId:currentUser.uid,path:path,createdAt:database.getCurrentTimestamp()});setName(\"\");closeModal();}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:openModal,variant:\"outline-success\",size:\"sm\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFolderPlus})),/*#__PURE__*/React.createElement(Modal,{show:open,onHide:closeModal},/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Folder Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",required:true,value:name,onChange:function onChange(e){return setName(e.target.value);}}))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:closeModal},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Add Folder\")))));}","map":{"version":3,"sources":["/Users/hardikkhare/zotdrive/src/components/google-drive/AddFolderButton.js"],"names":["React","useState","Button","Modal","Form","FontAwesomeIcon","faFolderPlus","database","useAuth","ROOT_FOLDER","AddFolderButton","currentFolder","open","setOpen","name","setName","currentUser","openModal","closeModal","handleSubmit","e","preventDefault","path","push","id","folders","add","parentId","userId","uid","createdAt","getCurrentTimestamp","target","value"],"mappings":"4SAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,KAAoC,iBAApC,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,YAAT,KAA6B,mCAA7B,CACA,OAASC,QAAT,KAAyB,gBAAzB,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,WAAT,KAA4B,uBAA5B,CAEA,cAAe,SAASC,CAAAA,eAAT,MAA4C,IAAjBC,CAAAA,aAAiB,MAAjBA,aAAiB,eACjCV,QAAQ,CAAC,KAAD,CADyB,wCAClDW,IADkD,eAC5CC,OAD4C,8BAEjCZ,QAAQ,CAAC,EAAD,CAFyB,yCAElDa,IAFkD,eAE5CC,OAF4C,4BAGjCP,OAAO,EAH0B,CAGjDQ,WAHiD,UAGjDA,WAHiD,CAKzD,QAASC,CAAAA,SAAT,EAAqB,CACnBJ,OAAO,CAAC,IAAD,CAAP,CACD,CAED,QAASK,CAAAA,UAAT,EAAsB,CACpBL,OAAO,CAAC,KAAD,CAAP,CACD,CAED,QAASM,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GAEA,GAAIV,aAAa,EAAI,IAArB,CAA2B,OAE3B,GAAMW,CAAAA,IAAI,oBAAOX,aAAa,CAACW,IAArB,CAAV,CACA,GAAIX,aAAa,GAAKF,WAAtB,CAAmC,CACjCa,IAAI,CAACC,IAAL,CAAU,CAAET,IAAI,CAAEH,aAAa,CAACG,IAAtB,CAA4BU,EAAE,CAAEb,aAAa,CAACa,EAA9C,CAAV,EACD,CAEDjB,QAAQ,CAACkB,OAAT,CAAiBC,GAAjB,CAAqB,CACnBZ,IAAI,CAAEA,IADa,CAEnBa,QAAQ,CAAEhB,aAAa,CAACa,EAFL,CAGnBI,MAAM,CAAEZ,WAAW,CAACa,GAHD,CAInBP,IAAI,CAAEA,IAJa,CAKnBQ,SAAS,CAAEvB,QAAQ,CAACwB,mBAAT,EALQ,CAArB,EAOAhB,OAAO,CAAC,EAAD,CAAP,CACAG,UAAU,GACX,CAED,mBACE,qDACE,oBAAC,MAAD,EAAQ,OAAO,CAAED,SAAjB,CAA4B,OAAO,CAAC,iBAApC,CAAsD,IAAI,CAAC,IAA3D,eACE,oBAAC,eAAD,EAAiB,IAAI,CAAEX,YAAvB,EADF,CADF,cAIE,oBAAC,KAAD,EAAO,IAAI,CAAEM,IAAb,CAAmB,MAAM,CAAEM,UAA3B,eACE,oBAAC,IAAD,EAAM,QAAQ,CAAEC,YAAhB,eACE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,IAAD,CAAM,KAAN,mBACE,oBAAC,IAAD,CAAM,KAAN,oBADF,cAEE,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,KAFV,CAGE,KAAK,CAAEL,IAHT,CAIE,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,CAAAA,OAAO,CAACK,CAAC,CAACY,MAAF,CAASC,KAAV,CAAX,EAJb,EAFF,CADF,CADF,cAYE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,OAAO,CAAEf,UAArC,UADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,eAJF,CAZF,CADF,CAJF,CADF,CA8BD","sourcesContent":["import React, { useState } from \"react\"\nimport { Button, Modal, Form } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faFolderPlus } from \"@fortawesome/free-solid-svg-icons\"\nimport { database } from \"../../firebase\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport { ROOT_FOLDER } from \"../../hooks/useFolder\"\n\nexport default function AddFolderButton({ currentFolder }) {\n  const [open, setOpen] = useState(false)\n  const [name, setName] = useState(\"\")\n  const { currentUser } = useAuth()\n\n  function openModal() {\n    setOpen(true)\n  }\n\n  function closeModal() {\n    setOpen(false)\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n\n    if (currentFolder == null) return\n\n    const path = [...currentFolder.path]\n    if (currentFolder !== ROOT_FOLDER) {\n      path.push({ name: currentFolder.name, id: currentFolder.id })\n    }\n\n    database.folders.add({\n      name: name,\n      parentId: currentFolder.id,\n      userId: currentUser.uid,\n      path: path,\n      createdAt: database.getCurrentTimestamp(),\n    })\n    setName(\"\")\n    closeModal()\n  }\n\n  return (\n    <>\n      <Button onClick={openModal} variant=\"outline-success\" size=\"sm\">\n        <FontAwesomeIcon icon={faFolderPlus} />\n      </Button>\n      <Modal show={open} onHide={closeModal}>\n        <Form onSubmit={handleSubmit}>\n          <Modal.Body>\n            <Form.Group>\n              <Form.Label>Folder Name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                required\n                value={name}\n                onChange={e => setName(e.target.value)}\n              />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={closeModal}>\n              Close\n            </Button>\n            <Button variant=\"success\" type=\"submit\">\n              Add Folder\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}